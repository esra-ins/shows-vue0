{"ast":null,"code":"import { ref } from 'vue';\nimport env from '@/env.js';\nimport { watch, onBeforeUnmount } from \"vue\";\nimport debounce from \"lodash.debounce\";\nimport { useMovieStore } from '../stores/MovieStore';\nexport default {\n  name: 'HomeView',\n  components: {},\n  setup() {\n    const search = ref(\"\");\n    const movies = ref([]);\n    const topRatedShows = ref([]);\n    const popularShows = ref([]);\n    const imgBaseUrl = env.imgBaseUrl;\n    const filter = ref('popular');\n    const movieStore = useMovieStore();\n\n    //let awaitingSearch = false;\n\n    movieStore.getMovies();\n    const GetTopRatedShows = () => {\n      const topRatedShowsUrl = `${env.baseUrl}tv/top_rated?${env.apikey}`;\n      fetch(topRatedShowsUrl).then(response => response.json()).then(data => {\n        topRatedShows.value = data.results;\n\n        //console.log(topRatedShows.value);\n      });\n    };\n\n    GetTopRatedShows();\n    const GetPopularShows = () => {\n      const popularShowsUrl = `${env.baseUrl}tv/popular?${env.apikey}`;\n      fetch(popularShowsUrl).then(response => response.json()).then(data => {\n        popularShows.value = data.results;\n\n        //console.log(popularShows.value);\n      });\n    };\n\n    GetPopularShows();\n    const ChangeVisibilityOfResults = () => {\n      document.querySelector('form .list-1').classList.add('hidden');\n    };\n    const SearchMovies = () => {\n      if (search.value && search.value.length >= 3) {\n        console.log(search.value);\n        const searchUrl = `${env.baseUrl}search/movie?${env.apikey}&query=${search.value}`;\n        console.log(searchUrl);\n        fetch(searchUrl).then(response => response.json()).then(data => {\n          console.log(data);\n          movies.value = data.results; // array name: results\n\n          search.value = \"\";\n\n          //console.log(movies.value);\n        });\n\n        document.querySelector('form .list-1').classList.remove('hidden');\n      }\n    };\n    const debouncedWatch = debounce(() => {\n      SearchMovies();\n    }, 3000);\n    watch(search, debouncedWatch);\n    onBeforeUnmount(() => {\n      debouncedWatch.cancel();\n    });\n    const addToFav = show => {\n      console.log(show.name);\n    };\n    return {\n      search,\n      movies,\n      ChangeVisibilityOfResults,\n      SearchMovies,\n      GetTopRatedShows,\n      topRatedShows,\n      imgBaseUrl,\n      GetPopularShows,\n      popularShows,\n      addToFav,\n      filter,\n      movieStore\n    };\n  }\n};","map":{"version":3,"names":["ref","env","watch","onBeforeUnmount","debounce","useMovieStore","name","components","setup","search","movies","topRatedShows","popularShows","imgBaseUrl","filter","movieStore","getMovies","GetTopRatedShows","topRatedShowsUrl","baseUrl","apikey","fetch","then","response","json","data","value","results","GetPopularShows","popularShowsUrl","ChangeVisibilityOfResults","document","querySelector","classList","add","SearchMovies","length","console","log","searchUrl","remove","debouncedWatch","cancel","addToFav","show"],"sources":["/home/esraisik/Desktop/shows-vue0-main/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"mainbanner bg-cover h-[600px]\">\n    <div class=\"column_wrapper ml-8\">\n      <div class=\"content_wrapper wrap ml-8 text-white font-bold\">\n        <div class=\"title pt-8 pb-16\">\n          <h2 class=\"text-5xl pt-8\">Welcome.</h2>\n          <h3 class=\"text-4xl pt-4\">Millions of movies, TV shows and people to discover. Explore now.</h3>\n        </div>\n        <div class=\"search inline-flex h-[46px] w-4/5\">\n          <!--  <form @submit.prevent=\"SearchMovies()\" class=\"h-[46px] w-4/5 inline-flex\">  -->\n          <form v-on:click=\"ChangeVisibilityOfResults()\" v-on:keydown=\"ChangeVisibilityOfResults()\" class=\"h-[46px] w-4/5 inline-flex\">\n            <label class=\"h-[46px] w-full rounded-full\">\n                <input class=\"w-full h-full rounded-full pl-2 text-black\" v-model=\"search\" label=\"Search\" placeholder=\"Search for a movie, tv show, person......\">\n                <div class=\"list-1 bg-white overflow-y-scroll h-[300px] hidden\">\n                  <div class=\"movie p-4 text-black\" v-for=\"movie in movies\" :key=\"movie.id\">\n                    {{movie.title}}\n                    {{movie.vote_average}}\n                    <!--  <img :src=\"imgBaseUrl+movie.poster_path\" />  -->\n                  </div>\n                </div>\n            </label> \n            <input class=\"rounded-full bg-green w-24 h-[46px] ml-[-40px]\" type=\"submit\" value=\"Search\"/>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div>\n    <br/>\n    <hr/>\n\n    <div class=\"top-rated-list mb-8 font-bold\">\n      <!-- <input class=\"cursor-pointer\" type=\"button\" value=\"TOP RATED TV-SHOWS\" @click=\"GetTopRatedShows()\">  -->\n      <input class=\"cursor-pointer\" type=\"button\" value=\"TOP RATED TV-SHOWS\">\n      <div class=\"w-full overflow-hidden\">\n        <div class=\"inline-flex overflow-x-scroll w-full overflow-y-hidden\">\n          <div class=\"top-rated  m-4 w-32 h-60 min-w-fit\" v-for=\"show in topRatedShows\" :key=\"show.id\" >\n            <img :src=\"imgBaseUrl+show.poster_path\" class=\"max-h-40 rounded-xl\"/>\n            <div class=\"w-9 h-9 bg-black text-white text-center rounded-2xl -mt-4 pt-2 border-white relative\">{{show.vote_average}}</div>\n            <!-- fav button -->\n            <div class=\"w-min mt-1 min-w-fit\">{{show.name}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"popular-list font-bold mb-12\">\n      <input class=\"cursor-pointer mb-2\" type=\"button\" value=\"POPULAR TV-SHOWS\">\n      <!--  <input class=\"cursor-pointer mb-2\" type=\"button\" value=\"POPULAR TV-SHOWS\" @click=\"GetPopularShows()\">  -->\n      <div class=\"w-full overflow-hidden\">\n        <div class=\"inline-flex overflow-x-scroll w-full overflow-y-hidden\">\n          <div class=\"top-rated m-4 w-32 h-60 min-w-fit\" v-for=\"show in popularShows\" :key=\"show.id\" >\n            <img :src=\"imgBaseUrl+show.poster_path\" class=\"max-h-40 rounded-xl\"/>\n            <div class=\"w-9 h-9 bg-black text-white text-center rounded-2xl -mt-4 pt-2 border-white relative\">{{show.vote_average}}</div>\n\n            <button @click=\"movieStore.toggleFav(show)\" :class=\"{active: movieStore.isFavActive(show)}\"> favo </button>\n\n            <div class=\"w-min mt-1 min-w-fit\">{{show.name}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"hidden\">\n      <p>favorites</p>\n      <div  v-for=\"show in movieStore.favMovies\" :key=\"show.id\"  >\n        <div>{{show.name}}</div>\n      </div>\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport {ref} from 'vue';\nimport env from '@/env.js';\n\nimport { watch, onBeforeUnmount } from \"vue\";\nimport debounce from \"lodash.debounce\";\n\nimport {useMovieStore} from '../stores/MovieStore';\n\nexport default {\n  name: 'HomeView',\n  components: {\n    \n  },\n  setup () {\n    const search = ref(\"\");\n    const movies = ref([]);\n    const topRatedShows = ref([]);\n    const popularShows = ref([]);\n    const imgBaseUrl = env.imgBaseUrl;\n\n    const filter=ref('popular');\n\n    const movieStore = useMovieStore();\n\n    //let awaitingSearch = false;\n\n    movieStore.getMovies();\n     \n    const GetTopRatedShows = () => {\n      const topRatedShowsUrl = `${env.baseUrl}tv/top_rated?${env.apikey}`;\n\n      fetch(topRatedShowsUrl).then(response => response.json()).then(data => {\n          topRatedShows.value=data.results;\n\n          //console.log(topRatedShows.value);\n      })\n    }\n\n    GetTopRatedShows();\n\n    const GetPopularShows = () => {\n      const popularShowsUrl = `${env.baseUrl}tv/popular?${env.apikey}`;\n\n      fetch(popularShowsUrl).then(response => response.json()).then(data => {\n          popularShows.value = data.results;\n\n          //console.log(popularShows.value);\n      })\n    }\n\n    GetPopularShows();\n\n    const ChangeVisibilityOfResults = () => {\n      document.querySelector('form .list-1').classList.add('hidden');\n    }\n\n    const SearchMovies = () => {\n      if (search.value && search.value.length >= 3) {\n        console.log(search.value);\n\n        const searchUrl=`${env.baseUrl}search/movie?${env.apikey}&query=${search.value}`;\n\n        console.log(searchUrl);\n\n        fetch(searchUrl).then(response => response.json()).then(data => {\n          console.log(data);\n\n          movies.value = data.results; // array name: results\n\n          search.value = \"\";\n\n          //console.log(movies.value);\n        });\n\n        document.querySelector('form .list-1').classList.remove('hidden');\n      }\n    }\n\n    const debouncedWatch = debounce(() => {\n      SearchMovies();\n    }, 3000);\n\n    watch(search, debouncedWatch);\n\n    onBeforeUnmount(() => {\n      debouncedWatch.cancel();\n    })\n\n    const addToFav = (show) => {\n      console.log(show.name);\n    }\n\n    return {\n      search,\n      movies,\n      ChangeVisibilityOfResults,\n      SearchMovies,\n      GetTopRatedShows,\n      topRatedShows,\n      imgBaseUrl,\n      GetPopularShows,\n      popularShows,\n      addToFav,\n      filter,\n      movieStore\n    }\n  },\n    \n}\n</script>\n\n<style>\n.mainbanner {\n    background-image: linear-gradient(to right, rgba(6, 57, 112, 0.8) 0%, rgba(6, 57, 112, 0) 100%), url(\"https://www.themoviedb.org/t/p/w1920_and_h800_multi_faces/4anfueQJG7PzfVain87idtuK3hl.jpg\");\n}\n\n.popular-list button.active{\n  background-color:rgb(250, 7, 169);\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}