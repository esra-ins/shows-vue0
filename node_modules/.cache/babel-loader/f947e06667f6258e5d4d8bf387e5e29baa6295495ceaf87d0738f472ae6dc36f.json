{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from 'pinia';\nimport env from '@/env.js';\nimport { ref } from 'vue';\nexport const useMovieStore = defineStore('movieStore', {\n  state: () => ({\n    movies: [],\n    popularShowsUrl: `${env.baseUrl}tv/popular?${env.apikey}`,\n    favMovies: JSON.parse(localStorage.getItem('favorited-movies')) || [],\n    isFav: false\n    //iFav:false\n  }),\n\n  actions: {\n    //const popularShowsUrl=`${env.baseUrl}tv/popular?${env.apikey}`;\n\n    async getMovies() {\n      const res = await fetch(this.popularShowsUrl);\n      const data = await res.json();\n      //console.log(\"data from action = \",data.results);\n      this.movies = data.results;\n      //console.log(\"this.movies  = \",this.movies)\n    },\n\n    //addToFavs(fav){\n    // this.favMovies.push(fav);\n    // console.log(\"favmovies  \", this.favMovies)\n    //},\n    isFavActive(movie) {\n      console.log(this.favMovies);\n      console.log(movie.name);\n      return JSON.parse(JSON.stringify(this.favMovies)).includes(movie);\n\n      //return this.favMovies.includes(movie);\n      //return iFav;\n    },\n\n    toggleFav(movie) {\n      const isFavo = ref(Boolean);\n      isFavo.value = this.favMovies.includes(movie);\n      //console.log(this.favMovies.includes(movie))\n\n      if (isFavo.value) {\n        //const newFavMovies= this.favMovies.filter(m=>m.id!==movie.id);\n        this.favMovies = this.favMovies.filter(m => m.id !== movie.id);\n\n        //this.favMovies=newFavMovies;\n\n        //console.log(\"newss\",newFavMovies);\n        isFavo.value = false;\n        //console.log(\"if içinde \",isFavo.value);\n      } else {\n        this.favMovies.push(movie);\n        isFavo.value = true;\n        // console.log(\"else içinde\",isFavo.value);\n      }\n\n      this.isFav = isFavo.value;\n      console.log(\"list2 =\", this.favMovies);\n      //return isFavo;\n      //return this.isFav;\n\n      const favoritesObject = JSON.parse(JSON.stringify(this.favMovies));\n      console.log('------0');\n      //console.log(Object.values(JSON.parse(JSON.stringify(this.favMovies))))\n      //console.log(typeof this.favMovies);\n\n      console.log(favoritesObject);\n      console.log(typeof favoritesObject);\n      console.log(JSON.stringify(favoritesObject));\n      localStorage.setItem('favorited-movies', JSON.stringify(favoritesObject));\n      console.log(JSON.parse(localStorage.getItem('favorited-movies')));\n    }\n  }\n});\n\n//const popularShowsUrl=`${env.baseUrl}tv/popular?${env.apikey}`;\n//fetch(popularShowsUrl).then(response=>response.json()).then(data=>{\n// popularShows.value=data.results;\n// console.log(popularShows.value);\n//})","map":{"version":3,"names":["defineStore","env","ref","useMovieStore","state","movies","popularShowsUrl","baseUrl","apikey","favMovies","JSON","parse","localStorage","getItem","isFav","actions","getMovies","res","fetch","data","json","results","isFavActive","movie","console","log","name","stringify","includes","toggleFav","isFavo","Boolean","value","filter","m","id","push","favoritesObject","setItem"],"sources":["/home/esraisik/Desktop/shows-vue0-main/src/stores/MovieStore.js"],"sourcesContent":["import {defineStore} from 'pinia'\nimport env from '@/env.js';\nimport {ref} from 'vue';\n\nexport const useMovieStore=defineStore('movieStore',{\n    state:()=>({\n        movies:[],\n        popularShowsUrl:`${env.baseUrl}tv/popular?${env.apikey}`,\n        favMovies: JSON.parse(localStorage.getItem('favorited-movies')) || [],\n        isFav:false,\n        //iFav:false\n\n    }),\n    actions: {\n//const popularShowsUrl=`${env.baseUrl}tv/popular?${env.apikey}`;\n\n        async getMovies(){\n            const res=await fetch(this.popularShowsUrl);\n            const data=await res.json();\n            //console.log(\"data from action = \",data.results);\n            this.movies=data.results;\n            //console.log(\"this.movies  = \",this.movies)\n        },\n\n        //addToFavs(fav){\n          // this.favMovies.push(fav);\n          // console.log(\"favmovies  \", this.favMovies)\n        //},\n       isFavActive(movie){\n        console.log(this.favMovies)\n\n        console.log(movie.name)\n\n        return JSON.parse(JSON.stringify(this.favMovies)).includes(movie);\n\n              //return this.favMovies.includes(movie);\n             //return iFav;\n        },\n        toggleFav(movie){\n           const isFavo=ref(Boolean);\n           isFavo.value= this.favMovies.includes(movie);\n           //console.log(this.favMovies.includes(movie))\n\n           if(isFavo.value){\n           \n            //const newFavMovies= this.favMovies.filter(m=>m.id!==movie.id);\n            this.favMovies= this.favMovies.filter(m=>m.id!==movie.id);\n\n            //this.favMovies=newFavMovies;\n\n            //console.log(\"newss\",newFavMovies);\n            isFavo.value=false;\n             //console.log(\"if içinde \",isFavo.value);\n             \n           }\n           else{\n           this.favMovies.push(movie);\n           isFavo.value=true;\n            // console.log(\"else içinde\",isFavo.value);\n           }\n           this.isFav=isFavo.value;\n           console.log(\"list2 =\",this.favMovies)\n           //return isFavo;\n           //return this.isFav;\n\n\n           const favoritesObject = JSON.parse(JSON.stringify(this.favMovies));\n\n           console.log('------0');\n           //console.log(Object.values(JSON.parse(JSON.stringify(this.favMovies))))\n           //console.log(typeof this.favMovies);\n\n           console.log(favoritesObject);\n\n           console.log(typeof favoritesObject);\n\n           console.log(JSON.stringify(favoritesObject))\n\n           localStorage.setItem('favorited-movies', JSON.stringify(favoritesObject));\n\n\n           console.log(JSON.parse(localStorage.getItem('favorited-movies')));\n        }\n    }\n})\n\n\n\n//const popularShowsUrl=`${env.baseUrl}tv/popular?${env.apikey}`;\n//fetch(popularShowsUrl).then(response=>response.json()).then(data=>{\n   // popularShows.value=data.results;\n   // console.log(popularShows.value);\n//})\n"],"mappings":";AAAA,SAAQA,WAAW,QAAO,OAAO;AACjC,OAAOC,GAAG,MAAM,UAAU;AAC1B,SAAQC,GAAG,QAAO,KAAK;AAEvB,OAAO,MAAMC,aAAa,GAACH,WAAW,CAAC,YAAY,EAAC;EAChDI,KAAK,EAACA,CAAA,MAAK;IACPC,MAAM,EAAC,EAAE;IACTC,eAAe,EAAE,GAAEL,GAAG,CAACM,OAAQ,cAAaN,GAAG,CAACO,MAAO,EAAC;IACxDC,SAAS,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CAAC,IAAI,EAAE;IACrEC,KAAK,EAAC;IACN;EAEJ,CAAC,CAAC;;EACFC,OAAO,EAAE;IACb;;IAEQ,MAAMC,SAASA,CAAA,EAAE;MACb,MAAMC,GAAG,GAAC,MAAMC,KAAK,CAAC,IAAI,CAACZ,eAAe,CAAC;MAC3C,MAAMa,IAAI,GAAC,MAAMF,GAAG,CAACG,IAAI,EAAE;MAC3B;MACA,IAAI,CAACf,MAAM,GAACc,IAAI,CAACE,OAAO;MACxB;IACJ,CAAC;;IAED;IACE;IACA;IACF;IACDC,WAAWA,CAACC,KAAK,EAAC;MACjBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAChB,SAAS,CAAC;MAE3Be,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,IAAI,CAAC;MAEvB,OAAOhB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACiB,SAAS,CAAC,IAAI,CAAClB,SAAS,CAAC,CAAC,CAACmB,QAAQ,CAACL,KAAK,CAAC;;MAE3D;MACD;IACL,CAAC;;IACDM,SAASA,CAACN,KAAK,EAAC;MACb,MAAMO,MAAM,GAAC5B,GAAG,CAAC6B,OAAO,CAAC;MACzBD,MAAM,CAACE,KAAK,GAAE,IAAI,CAACvB,SAAS,CAACmB,QAAQ,CAACL,KAAK,CAAC;MAC5C;;MAEA,IAAGO,MAAM,CAACE,KAAK,EAAC;QAEf;QACA,IAAI,CAACvB,SAAS,GAAE,IAAI,CAACA,SAAS,CAACwB,MAAM,CAACC,CAAC,IAAEA,CAAC,CAACC,EAAE,KAAGZ,KAAK,CAACY,EAAE,CAAC;;QAEzD;;QAEA;QACAL,MAAM,CAACE,KAAK,GAAC,KAAK;QACjB;MAEF,CAAC,MACG;QACJ,IAAI,CAACvB,SAAS,CAAC2B,IAAI,CAACb,KAAK,CAAC;QAC1BO,MAAM,CAACE,KAAK,GAAC,IAAI;QAChB;MACD;;MACA,IAAI,CAAClB,KAAK,GAACgB,MAAM,CAACE,KAAK;MACvBR,OAAO,CAACC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAChB,SAAS,CAAC;MACrC;MACA;;MAGA,MAAM4B,eAAe,GAAG3B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACiB,SAAS,CAAC,IAAI,CAAClB,SAAS,CAAC,CAAC;MAElEe,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtB;MACA;;MAEAD,OAAO,CAACC,GAAG,CAACY,eAAe,CAAC;MAE5Bb,OAAO,CAACC,GAAG,CAAC,OAAOY,eAAe,CAAC;MAEnCb,OAAO,CAACC,GAAG,CAACf,IAAI,CAACiB,SAAS,CAACU,eAAe,CAAC,CAAC;MAE5CzB,YAAY,CAAC0B,OAAO,CAAC,kBAAkB,EAAE5B,IAAI,CAACiB,SAAS,CAACU,eAAe,CAAC,CAAC;MAGzEb,OAAO,CAACC,GAAG,CAACf,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;IACpE;EACJ;AACJ,CAAC,CAAC;;AAIF;AACA;AACG;AACA;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}