{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from 'pinia';\nimport env from '@/env.js';\nimport { ref } from 'vue';\nexport const useMovieStore = defineStore('movieStore', {\n  state: () => ({\n    movies: [],\n    popularShowsUrl: `${env.baseUrl}tv/popular?${env.apikey}`,\n    favMovies: JSON.parse(localStorage.getItem('favorite-movies')) || [],\n    isFav: false\n  }),\n  actions: {\n    async getMovies() {\n      const res = await fetch(this.popularShowsUrl);\n      const data = await res.json();\n      this.movies = data.results;\n      // console.log(\"this.movies  = \", this.movies)\n    },\n\n    isFavActive(movie) {\n      function convertJsonToArray(json) {\n        var result = [];\n        var keys = Object.keys(json);\n        keys.forEach(key => {\n          result.push(json[key]);\n        });\n        return result;\n      }\n      const favMoviesObject = convertJsonToArray(JSON.parse(JSON.stringify(this.favMovies)));\n      //const favMoviesObject = Object.entries(JSON.parse(JSON.stringify(this.favMovies)))\n\n      return Object.values(favMoviesObject).some(item => {\n        return item.id === movie.id;\n      });\n    },\n    toggleFav(movie) {\n      const isFavorite = ref(Boolean);\n      isFavorite.value = this.favMovies.includes(movie);\n      if (isFavorite.value) {\n        this.favMovies = this.favMovies.filter(m => m.id !== movie.id);\n        isFavorite.value = false;\n        //console.log(\"if içinde \",isFavorite.value);\n      } else {\n        this.favMovies.push(movie);\n        isFavorite.value = true;\n        // console.log(\"else içinde\",isFavorite.value);\n      }\n\n      this.isFav = isFavorite.value;\n      const favoritesObject = JSON.parse(JSON.stringify(this.favMovies));\n      localStorage.setItem('favorite-movies', JSON.stringify(favoritesObject));\n\n      // console.log(\"list2 = \", this.favMovies)\n      // console.log('------0');\n      // console.log(typeof favoritesObject);\n      // console.log(JSON.stringify(favoritesObject))\n      // console.log(JSON.parse(localStorage.getItem('favorite-movies')));\n    }\n  }\n});","map":{"version":3,"names":["defineStore","env","ref","useMovieStore","state","movies","popularShowsUrl","baseUrl","apikey","favMovies","JSON","parse","localStorage","getItem","isFav","actions","getMovies","res","fetch","data","json","results","isFavActive","movie","convertJsonToArray","result","keys","Object","forEach","key","push","favMoviesObject","stringify","values","some","item","id","toggleFav","isFavorite","Boolean","value","includes","filter","m","favoritesObject","setItem"],"sources":["/home/esraisik/Desktop/shows-vue0-main/src/stores/MovieStore.js"],"sourcesContent":["import { defineStore } from 'pinia';\nimport env from '@/env.js';\nimport { ref } from 'vue';\n\nexport const useMovieStore = defineStore('movieStore', {\n    state: () => ({\n        movies: [],\n        popularShowsUrl: `${env.baseUrl}tv/popular?${env.apikey}`,\n        favMovies: JSON.parse(localStorage.getItem('favorite-movies')) || [],\n        isFav: false,\n    }),\n    actions: {\n        async getMovies () {\n            const res = await fetch(this.popularShowsUrl);\n            const data = await res.json();\n\n            this.movies = data.results;\n            // console.log(\"this.movies  = \", this.movies)\n        },\n        isFavActive (movie) {\n            function convertJsonToArray (json) {\n                var result = [];\n                var keys = Object.keys(json);\n\n                keys.forEach((key) => {\n                    result.push(json[key]);\n                });\n\n                return result;\n            }\n\n            const favMoviesObject = convertJsonToArray(JSON.parse(JSON.stringify(this.favMovies)))\n            //const favMoviesObject = Object.entries(JSON.parse(JSON.stringify(this.favMovies)))\n\n            return Object.values(favMoviesObject).some((item) => {\n                return item.id === movie.id;\n            });\n        },\n        toggleFav (movie) {\n            const isFavorite = ref(Boolean);\n            isFavorite.value = this.favMovies.includes(movie);\n\n            if (isFavorite.value) {\n                this.favMovies= this.favMovies.filter(m=>m.id!==movie.id);\n\n                isFavorite.value=false;\n                //console.log(\"if içinde \",isFavorite.value);\n            } else {\n                this.favMovies.push(movie);\n\n                isFavorite.value = true;\n                // console.log(\"else içinde\",isFavorite.value);\n            }\n\n            this.isFav = isFavorite.value;\n\n            const favoritesObject = JSON.parse(JSON.stringify(this.favMovies));\n\n            localStorage.setItem('favorite-movies', JSON.stringify(favoritesObject));\n\n            // console.log(\"list2 = \", this.favMovies)\n            // console.log('------0');\n            // console.log(typeof favoritesObject);\n            // console.log(JSON.stringify(favoritesObject))\n            // console.log(JSON.parse(localStorage.getItem('favorite-movies')));\n        }\n    }\n})\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,GAAG,MAAM,UAAU;AAC1B,SAASC,GAAG,QAAQ,KAAK;AAEzB,OAAO,MAAMC,aAAa,GAAGH,WAAW,CAAC,YAAY,EAAE;EACnDI,KAAK,EAAEA,CAAA,MAAO;IACVC,MAAM,EAAE,EAAE;IACVC,eAAe,EAAG,GAAEL,GAAG,CAACM,OAAQ,cAAaN,GAAG,CAACO,MAAO,EAAC;IACzDC,SAAS,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,IAAI,EAAE;IACpEC,KAAK,EAAE;EACX,CAAC,CAAC;EACFC,OAAO,EAAE;IACL,MAAMC,SAASA,CAAA,EAAI;MACf,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,IAAI,CAACZ,eAAe,CAAC;MAC7C,MAAMa,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,EAAE;MAE7B,IAAI,CAACf,MAAM,GAAGc,IAAI,CAACE,OAAO;MAC1B;IACJ,CAAC;;IACDC,WAAWA,CAAEC,KAAK,EAAE;MAChB,SAASC,kBAAkBA,CAAEJ,IAAI,EAAE;QAC/B,IAAIK,MAAM,GAAG,EAAE;QACf,IAAIC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACN,IAAI,CAAC;QAE5BM,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;UAClBJ,MAAM,CAACK,IAAI,CAACV,IAAI,CAACS,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC;QAEF,OAAOJ,MAAM;MACjB;MAEA,MAAMM,eAAe,GAAGP,kBAAkB,CAACd,IAAI,CAACC,KAAK,CAACD,IAAI,CAACsB,SAAS,CAAC,IAAI,CAACvB,SAAS,CAAC,CAAC,CAAC;MACtF;;MAEA,OAAOkB,MAAM,CAACM,MAAM,CAACF,eAAe,CAAC,CAACG,IAAI,CAAEC,IAAI,IAAK;QACjD,OAAOA,IAAI,CAACC,EAAE,KAAKb,KAAK,CAACa,EAAE;MAC/B,CAAC,CAAC;IACN,CAAC;IACDC,SAASA,CAAEd,KAAK,EAAE;MACd,MAAMe,UAAU,GAAGpC,GAAG,CAACqC,OAAO,CAAC;MAC/BD,UAAU,CAACE,KAAK,GAAG,IAAI,CAAC/B,SAAS,CAACgC,QAAQ,CAAClB,KAAK,CAAC;MAEjD,IAAIe,UAAU,CAACE,KAAK,EAAE;QAClB,IAAI,CAAC/B,SAAS,GAAE,IAAI,CAACA,SAAS,CAACiC,MAAM,CAACC,CAAC,IAAEA,CAAC,CAACP,EAAE,KAAGb,KAAK,CAACa,EAAE,CAAC;QAEzDE,UAAU,CAACE,KAAK,GAAC,KAAK;QACtB;MACJ,CAAC,MAAM;QACH,IAAI,CAAC/B,SAAS,CAACqB,IAAI,CAACP,KAAK,CAAC;QAE1Be,UAAU,CAACE,KAAK,GAAG,IAAI;QACvB;MACJ;;MAEA,IAAI,CAAC1B,KAAK,GAAGwB,UAAU,CAACE,KAAK;MAE7B,MAAMI,eAAe,GAAGlC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACsB,SAAS,CAAC,IAAI,CAACvB,SAAS,CAAC,CAAC;MAElEG,YAAY,CAACiC,OAAO,CAAC,iBAAiB,EAAEnC,IAAI,CAACsB,SAAS,CAACY,eAAe,CAAC,CAAC;;MAExE;MACA;MACA;MACA;MACA;IACJ;EACJ;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}